(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b64ab"],{"1d13":function(s,a,t){"use strict";t.r(a);var r=function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("函数声明")])]),t("p",[s._v("通过关键字 "),t("code",{pre:!0},[s._v("function")]),s._v(" 声明函数")]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("functionName")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("arg0, arg1, arg2")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//函数体")]),s._v("\n}\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//只在 Firefox、Safari、Chrome 和 Opera 有效")]),s._v("\nalert(functionName.name); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"functionName"')]),s._v("\n")])]),t("blockquote",[t("p",[s._v("Firefox、Safari、Chrome 和 Opera 都给函数定义了一个非标准的函数属性名称 "),t("code",{pre:!0},[s._v("name")])])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("函数声明提升")])]),t("p",[s._v("执行代码之前会先读取函数声明，这就意味着可以把函数声明放在调用它的语句后面。")]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("sayHi();\n"),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("sayHi")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n alert("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hi!"')]),s._v(");\n}\n")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("函数表达式")])]),t("ol",[t("li",[s._v("变量赋值语句，创建一个函数并将它赋值给变量 "),t("code",{pre:!0},[s._v("functionName")])])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" functionName = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("arg0, arg1, arg2")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//函数体")]),s._v("\n};\n")])]),t("blockquote",[t("p",[s._v("通过变量创建的函数叫做匿名函数(anonymous function)，因为 function 关键字后面没有标识符\n匿名函数有时候也叫拉姆达函数,匿名函数的 name 属性是空字符串")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("函数表达式与其他表达式一样，在使用前必须先赋值")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("sayHi(); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//错误:函数还不存在")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" sayHi = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n alert("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hi!"')]),s._v(");\n};\n")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("函数表达式赋值")])]),t("ol",[t("li",[s._v("动态赋值函数")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//不要这样做!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (condition) {\n "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("sayHi")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   alert("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hi!"')]),s._v(");\n }\n} "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("sayHi")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   alert("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Yo!"')]),s._v(");\n }\n}\n")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可以这样做 var sayHi;")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (condition) {\n sayHi = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   alert("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hi!"')]),s._v(");\n };\n} "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n sayHi = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   alert("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Yo!"')]),s._v(");\n };\n}\n")])]),t("blockquote",[t("p",[s._v("不同浏览器对声明函数有不同的处理方式，重复声明有的覆盖最后一个为准，有的第一个为准，所以动态声明函数使用函数表达式声明保证调用对应函数")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("函数表达式还可以内部声明匿名函数再返回得到一个函数表达式")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("createComparisonFunction")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("propertyName")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("object1, object2")]),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" value1 = object1[propertyName];\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" value2 = object2[propertyName];\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (value1 < value2) {\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1")]),s._v(";\n   }\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (value1 > value2) {\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n   }\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";\n };\n}\n")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("递归")])]),t("ol",[t("li",[s._v("递归函数是在一个函数通过名字调用自身的情况下构成")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("factorial")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("num")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (num <= "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n   "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v(";\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" num * factorial(num - "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(");\n }\n}\n")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("函数引用，声明函数在设置为 "),t("code",{pre:!0},[s._v("null")]),s._v(" 会导致函数引用都为 "),t("code",{pre:!0},[s._v("null")]),s._v(" 调用函数会报错")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" anotherFactorial = factorial;\nfactorial = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(";\nalert(anotherFactorial("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//出错!")]),s._v("\n")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("非标准模式递归调用使用"),t("code",{pre:!0},[s._v("arguments.callee")]),s._v("设置函数调用本身")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("factorial")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("num")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (num <= "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" num * "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("arguments")]),s._v(".callee(num - "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(");\n }\n}\n")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("通用的递归函数，采用匿名函数表达式来构建")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" factorial = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("f")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("num")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (num <= "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n }\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" num * f(num - "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(");\n};\n")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("闭包")])]),t("p",[s._v("闭包是指有权访问另一个 函数作用域中的变量的函数。创建闭包的常见方式，就是在一个函数内部创建另一个函数")]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("createComparisonFunction")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("propertyName")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("object1, object2")]),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//访问createComparisonFunction方法的参数")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" value1 = object1[propertyName];\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" value2 = object2[propertyName];\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (value1 < value2) {\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1")]),s._v(";\n   }\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (value1 > value2) {\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n   }\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";\n };\n}\n")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("函数作用域链")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("compare")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("value1, value2")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (value1 < value2) {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1")]),s._v(";\n }\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (value1 > value2) {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n }\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";\n}\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" result = compare("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(");\n")])]),t("ol",[t("li",[s._v("定义了 "),t("code",{pre:!0},[s._v("compare()")]),s._v(" 函数，全局作用域调用会保存引用到全局作用域中")]),t("li",[s._v("当调用 "),t("code",{pre:!0},[s._v("compare()")]),s._v(" 时，会创建一个包含 "),t("code",{pre:!0},[s._v("arguments")]),s._v(" 、 "),t("code",{pre:!0},[s._v("value1")]),s._v(" 和 "),t("code",{pre:!0},[s._v("value2")]),s._v(" 的活动对象，活动对象的作用域在该函数内部")]),t("li",[s._v("全局执行环境的变量对象(包含 "),t("code",{pre:!0},[s._v("result")]),s._v(" 和 "),t("code",{pre:!0},[s._v("compare")]),s._v(" )在 "),t("code",{pre:!0},[s._v("compare()")]),s._v(" 执行环境的作用域链，函数执行完成只会最终保留结果作用域")])]),t("blockquote",[t("p",[s._v("无论什么时候在函数中访问一个变量时，就会从作用域链中搜索具有相应名字的变量，执行完毕局部对象就会被销毁，但是闭包将参数、引用变量添加到调用的作用域上所以函数执行完毕，局部对象也还未被销毁，只有所有的引用对象被释放才会被销毁")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("内存占用销毁")])]),t("p",[s._v("执行函数完成，无需再调用该函数可以设置为 "),t("code",{pre:!0},[s._v("null")]),s._v(" 释放内存销毁对象")]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//创建函数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" compareNames = createComparisonFunction("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//调用函数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" result = compareNames({ "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(" }, { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(" });\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//解除对匿名函数的引用(以便释放内存)")]),s._v("\ncompareNames = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(";\n")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("销毁引用")])]),t("ol",[t("li",[s._v("由于闭包会携带包含它的函数的作用域，因此会比其他函数占用更多的内存。")]),t("li",[s._v("过度使用闭包可能会导致内存占用过多，只在绝对必要时再考虑使用闭包。")]),t("li",[s._v("V8 引擎等优化后的 JavaScript 引擎会尝试回收被闭包占用的内存，但慎重使用闭包。")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("闭包与变量")])]),t("ol",[t("li",[s._v("闭包所保存的是整个变量对象，而不是某个特殊的变量")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("createFunctions")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" result = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v("();\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v("; i++) {\n   result[i] = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" i;\n   };\n }\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" result;\n}\n")])]),t("blockquote",[t("p",[s._v("每个函数都应该返自己的索引值，即位置 0 的函数 返回 0，位置 1 的函数返回 1，以此类推。但实际上，每个函数都返回 10\n每个函数的作用域链中 都保存着 createFunctions()函数的活动对象，所以它们引用的都是同一个变量 i\n当 createFunctions()函数返回后，变量 i 的值是 10，此时每个函数都引用着保存变量 i 的同一个变量 对象，所以在每个函数内部 i 的值都是 10")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("匿名函数强制让闭包的行为,符合预期")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("createFunctions")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" result = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v("();\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v("; i++) {\n   result[i] = ("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("num")]),s._v(") ")]),s._v("{\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n       "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" num;\n     };\n   })(i);\n }\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" result;\n}\n")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("闭包与 this")])]),t("ol",[t("li",[s._v("匿名函数的执行环境具有全局性，因此其 this 对象通常指向 window")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" name = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"The Window"')]),s._v(";\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" object = {\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"My Object"')]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getNameFunc")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name;\n   };\n }\n};\nalert(object.getNameFunc()()); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"The Window"(在非严格模式下)')]),s._v("\n")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("外部作用域中的 this 对象保存在一个闭包能够访问到的变量里，就可以让闭包访问该对象")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" name = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"The Window"')]),s._v(";\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" object = {\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"My Object"')]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getNameFunc")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" that = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(";\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" that.name;\n   };\n }\n};\nalert(object.getNameFunc()()); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"My Object"')]),s._v("\n")])]),t("blockquote",[t("p",[s._v("this 和 arguments 也存在同样的问题。如果想访问作用域中的 arguments 对 象，必须将对该对象的引用保存到另一个闭包能够访问的变量中")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("赋值设置会改变闭包中匿名函数的 this")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" name = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"The Window"')]),s._v(";\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" object = {\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"My Object"')]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getName")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name;\n }\n};\n\nobject.getName(); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"My Object"')]),s._v("\nobject.getName(); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"My Object"')]),s._v("\n(object.getName = object.getName)(); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"The Window"，在非严格模式下')]),s._v("\n")])]),t("blockquote",[t("p",[s._v('赋值表达式的值是 函数本身，所以 this 的值不能得到维持，结果就返回了"The Window"')])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("闭包内存泄漏")])]),t("ol",[t("li",[s._v("IE9 中使用计数来管理内存的释放，所以引用存在就会导致内存的一直被保存")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("assignHandler")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//函数执行完毕，由于闭包会导致element变量被引用不释放，所以方法调用完毕内存会一直被占用")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" element = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".getElementById("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"someElement"')]),s._v(");\n element.onclick = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   alert(element.id);\n };\n}\n")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("通过清空变量设置为 null 来释放占用内存")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("assignHandler")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" element = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".getElementById("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"someElement"')]),s._v(");\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" id = element.id;\n element.onclick = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   alert(id);\n };\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//删除了引用内存释放，外部只保存函数的最终执行结果")]),s._v("\n element = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(";\n}\n")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("闭包模仿块级作用域")])]),t("ol",[t("li",[s._v("JavaScript 默认没有块级作用域")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("outputNumbers")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("count")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < count; i++) {\n   alert(i);\n }\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//没有块级作用域导致i的被保存引用没有被释放")]),s._v("\n alert(i); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//计数")]),s._v("\n}\n")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("声明变量覆盖，销毁引用重新定义取值")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("outputNumbers")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("count")]),s._v(")")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i="),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < count; i++){\nalert(i); }\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i; "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//重新声明变量")]),s._v("\nalert(i); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//计数 }")]),s._v("\n")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("匿名函数实现块级作用域")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//这里是块级作用域")]),s._v("\n})();\n")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("匿名函数定义规则")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{ "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//这里是块级作用域")]),s._v("\n}(); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//出错!")]),s._v("\n")])]),t("blockquote",[t("p",[s._v("JavaScript 将 function 关键字当作一个函数声明的开始，而函数声明后面不能用括号进行函数名称的定义")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("匿名函数通过括号定义函数并且设置为变量，在调用防止 function 定义函数规则冲突")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//这里是块级作用域")]),s._v("\n})();\n")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("闭包私有作用域")])]),t("ol",[t("li",[s._v("私有作用域限制变量的访问")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("outputNumbers")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("count")]),s._v(") ")]),s._v("{\n ("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < count; i++) {\n     alert(i);\n   }\n })();\n alert(i); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//导致一个错误!")]),s._v("\n}\n")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("私有作用域定义局部变量，执行函数释放内存减少引用")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" now = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Date")]),s._v("();\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (now.getMonth() == "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(" && now.getDate() == "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n   alert("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Happy new year!"')]),s._v(");\n }\n})();\n")])]),t("blockquote",[t("p",[s._v("定义局部变量，函数执行完毕后，没有指向匿名函数的引用。只要函 数执行完毕，就可以立即销毁其作用域链了")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("私有变量")])]),t("ol",[t("li",[s._v("定义私有变量通过特权方法访问")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("MyObject")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//私有变量和私有函数")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" privateVariable = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(";\n "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("privateFunction")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(";\n }\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//特权方法")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".publicMethod = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   privateVariable++;\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" privateFunction();\n };\n}\n")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("通过特权方法限制变量的访问和赋值")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".getName = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" name;\n };\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".setName = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("value")]),s._v(") ")]),s._v("{\n   name = value;\n };\n}\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(");\nalert(person.getName()); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"')]),s._v("\nperson.setName("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(");\nalert(person.getName()); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Greg"')]),s._v("\n")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("静态私有变量")])]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" name = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(";\n Person = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("value")]),s._v(") ")]),s._v("{\n   name = value;\n };\n Person.prototype.getName = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" name;\n };\n Person.prototype.setName = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("value")]),s._v(") ")]),s._v("{\n   name = value;\n };\n})();\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person1 = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(");\nalert(person1.getName()); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"')]),s._v("\nperson1.setName("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(");\nalert(person1.getName()); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Greg"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person2 = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Michael"')]),s._v(");\nalert(person1.getName()); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Michael"')]),s._v("\nalert(person2.getName()); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Michael"')]),s._v("\n")])]),t("blockquote",[t("p",[s._v("查找作用域链中的一个层次，就会在一定程度上影响查找速度。而这正是使用 闭包和私有变量的一个显明的不足之处")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("模块模式")])]),t("p",[s._v("匿名函数返回对象，限制内部变量操作，通过方法设置访问赋值同一个内部变量")]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" singleton = ("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//私有变量和私有函数")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" privateVariable = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(";\n "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("privateFunction")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(";\n }\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//特权公有方法和属性")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n   "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("publicProperty")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n   "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("publicMethod")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n     privateVariable++;\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" privateFunction();\n   }\n };\n})();\n")])]),t("blockquote",[t("p",[s._v("通过公共方法管理变量，外部通过同一个对象维护共同的变量，整个程序共同维护同一内部变量构成了单例模式")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("增强的模块模式")])]),t("p",[s._v("限制公共特权方法参数类型与变量类型，定义调用方法必须指定类型")]),t("div",{staticClass:"k-snippet--tag k-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" application = ("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//私有变量和函数")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" components = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v("();\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//初始化")]),s._v("\n components.push("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" BaseComponent());\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//创建 application 的一个局部副本")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" app = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" BaseComponent();\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//公共接口")]),s._v("\n app.getComponentCount = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" components.length;\n };\n app.registerComponent = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("component")]),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" component == "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"object"')]),s._v(") {\n     components.push(component);\n   }\n }; "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//返回这个副本")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" app;\n})();\n")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("函数表达式特点")])]),t("ol",[t("li",[s._v("函数表达式不同于函数声明。函数声明要求有名字，但函数表达式不需要。没有名字的函数表 达式也叫做匿名函数。")]),t("li",[s._v("在无法确定如何引用函数的情况下，递归函数就会变得比较复杂;")]),t("li",[s._v("递归函数应该始终使用 arguments.callee 来递归地调用自身，不要使用函数名——函数名可能会发生变化。")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("闭包特权访问")])]),t("ol",[t("li",[s._v("在后台执行环境中，闭包的作用域链包含着它自己的作用域、包含函数的作用域和全局作用域。")]),t("li",[s._v("函数的作用域及其所有变量都会在函数执行结束后被销毁，当函数返回了一个闭包时，这个函数的作用域将会一直在内存中保存到闭包不存在为止。")]),t("li",[s._v("使用闭包可以在 JavaScript 中模仿块级作用域(JavaScript 本身没有块级作用域的概念)")])])],2),t("k-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("闭包创建私有变量")])]),t("ol",[t("li",[s._v("即使 JavaScript 中没有正式的私有对象属性的概念，但可以使用闭包来实现公有方法，而通过公 有方法可以访问在包含作用域中定义的变量。")]),t("li",[s._v("有权访问私有变量的公有方法叫做特权方法。")]),t("li",[s._v("可以使用构造函数模式、原型模式来实现自定义类型的特权方法，也可以使用模块模式、增强的模块模式来实现单例的特权方法。")])])],2)],1)},e=[],p=t("25c1"),n={},l=Object(p["a"])(n,r,e,!1,null,null,null);l.options.__file="10.md";a["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0b64ab.03c3ac24.js.map